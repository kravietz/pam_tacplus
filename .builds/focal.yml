# build manifest for SourceHut
# https://man.sr.ht/builds.sr.ht/
# use bionic as it's the last distribution to include tacacs+ package
image: ubuntu/focal
packages:
- autoconf
- build-essential
- libtool
- automake
- libpam-dev
- libssl-dev
- clang
- clang-tools
- gnulib
sources:
- https://git.sr.ht/~kravietz/pam-tacplus
tasks:
- gnulib: |
        cd pam-tacplus
        gnulib-tool --makefile-name=Makefile.gnulib --libtool --symlink --import fcntl crypto/md5 array-list list xlist getrandom realloc
        autoreconf -f -i -v
- build-cc: |
        cd pam-tacplus
        ./configure
        make clean all