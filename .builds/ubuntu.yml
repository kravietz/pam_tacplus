---
# build manifest for SourceHut
# https://man.sr.ht/builds.sr.ht/
# use bionic as it's the last distribution to include tacacs+ package
image: ubuntu/bionic
packages:
- libpam-tacplus
- autoconf
- build-essential
- libtool
- automake
- libpam-dev
- libssl-dev
- tacacs+
- ca-certificates
sources:
- https://git.sr.ht/~kravietz/pam-tacplus
tasks:
- configure: |
        cd pam-tacplus
        autoreconf -i
        ./configure --enable-asan
        make
- test: |
        cd pam-tacplus
        sudo make install
        sudo ldconfig
        bash -x test.sh